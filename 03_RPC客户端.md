# RPC客户端

我们实现一个简单的客户端。它适用于演示所有服务器模型。它的过程就是向服务器连续发送 10 个 RPC 请求，并输出服务器的响应结果。

## 消息协议

我们使用长度前缀法来确定消息边界，消息体使用 json 序列化。

每个消息都有相应的名称，请求的名称使用 in 字段表示，请求的参数使用 params 字段表示，响应的名称是 out 字段表示，响应的结果用 result 字段表示。

我们将请求和响应使用 json 序列化成字符串作为消息体，然后通过 Python 内置的 struct 包将消息体的长度整数转成 4 个字节的长度前缀字符串。

```json
// 输入
{
    in: "ping",
    params: "ireader 0"
}

// 输出
{
    out: "pong",
    result: "ireader 0"
}
```

## 客户端代码




